<?php

function workshops_perm() {
	return array('Workshop Add New Resource Person', 'Workshop Add New College', 'Workshop Get College');
}

function workshops_menu(){
	$items = array();
	
	$items['workshops/add_resource_person'] = array(
		'title' => 'Add New Resource Person',
		'description' => 'Adding new resource preson\'s detail', 
		'page callback' => 'drupal_get_form',
		'page arguments' => array('workshops_add_resource_person_form'),
		'access arguments' => array('Workshop Add New Resource Person'),
		'type' => MENU_NORMAL_ITEM,
		'file' => 'add_resource_person.inc',
	);
	$items['workshops/add_college'] = array(
		'title' => 'Add New College Details',
		'description' => 'Adding new college details detail',
		'page callback' => 'drupal_get_form',
		'page arguments' => array('workshops_add_college_form'),
		'access arguments' => array('Workshop Add New College'),
		'type' => MENU_NORMAL_ITEM,
		'file' => 'add_college.inc',
	);
	$items['workshops/edit_college'] = array(
		'title' => 'Edit College Details',
		'description' => 'Adding new college details detail',
		'page callback' => 'drupal_get_form',
		'page arguments' => array('workshops_edit_college_form'),
		'access arguments' => array('Workshop Add New College'),
		'type' => MENU_NORMAL_ITEM,
		'file' => 'add_college.inc',
	);
	$items['workshops/list_college'] = array(
		'title' => 'Listing College Details',
		'page callback' => 'workshops_list_college_details',
		'access arguments' => array('Workshop Add New College'),
		'type' => MENU_NORMAL_ITEM,
		'file' => 'add_college.inc',
	);
	$items['workshops/get_college_details'] = array(
		'title' => 'Add New College Details',
		'description' => 'Adding new college details detail',
		'page callback' => 'get_college_details',
		'access arguments' => array('Workshop Get College'),
		'type' => MENU_NORMAL_ITEM,
	);

  return $items;
}

function get_college_details(){
	if(isset($_POST['state_code'])){
		$query = "select count(id) as ac_count from academic_center where state_code='".$_POST['state_code']."'";
		db_set_active('workshop_info');
		$result = db_query($query);
		db_set_active('default');
		$row = db_fetch_object($result);
		echo json_encode($row);
		exit;
	}
}
